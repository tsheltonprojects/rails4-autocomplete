!function(s){var t={};s.fn.railsAutocomplete=function(){var t=function(){this.railsAutoCompleter||(this.railsAutoCompleter=new s.railsAutocomplete(this))};return s.fn.on!==undefined?this.on("focus",t):this.live("focus",t)},s.railsAutocomplete=function(t){_e=t,this.init(_e)},s.railsAutocomplete.fn=s.railsAutocomplete.prototype={railsAutocomplete:"0.0.2"},s.railsAutocomplete.fn.extend=s.railsAutocomplete.extend=s.extend,s.railsAutocomplete.fn.extend({init:function(o){function u(t){return t.split(o.delimiter)}function e(t){return u(t).pop().replace(/^\s+/,"")}o.delimiter=s(o).attr("data-delimiter")||null,s(o).autocomplete($.extend({source:function(t,i){s.getJSON(s(o).attr("data-autocomplete"),{term:e(t.term)},function(t){if(0==t.length){var e="No existing matches";s(o).attr("data-autocomplete-label")!==undefined&&(e=s(o).attr("data-autocomplete-label")),(t=[])[0]={id:"",label:e}}s(t).each(function(t,e){var i={};i[e.id]=e,s(o).data(i)}),i.apply(null,arguments)})},change:function(t,e){if(""!=s(s(this).attr("data-id-element")).val()){s(s(this).attr("data-id-element")).val(e.item?e.item.id:"");var i=!1;s(this).attr("data-update-elements")&&(i=s.parseJSON(s(this).attr("data-update-elements")));var a=e.item?s(this).data(e.item.id.toString()):{};if(!i||""!=s(i.id).val())for(var n in i)s(i[n]).val(e.item?a[n]:"")}},minLength:2,focus:function(){return!1},select:function(t,e){var i=u(this.value);if(i.pop(),""!=e.item.id&&i.push(e.item.value),null!=o.delimiter)i.push(""),this.value=i.join(o.delimiter);else if(this.value=i.join(""),s(this).attr("data-id-element")&&s(s(this).attr("data-id-element")).val(e.item.id),s(this).attr("data-update-elements")){var a=s(this).data(e.item.id.toString()),n=s.parseJSON(s(this).attr("data-update-elements"));for(var l in n)s(n[l]).val(a[l])}var r=this.value;return s(this).bind("keyup.clearId",function(){s(this).val().trim()!=r.trim()&&(s(s(this).attr("data-id-element")).val(""),s(this).unbind("keyup.clearId"))}),s(o).trigger("railsAutocomplete.select",e),!1}},t[o.id]))}}),s(document).ready(function(){s("input[data-autocomplete]").railsAutocomplete()})}(jQuery);